!function(){"use strict";function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");if(this.config=t.mergeSettings(e),this.selector="string"==typeof this.config.selector?document.querySelector(this.config.selector):this.config.selector,null===this.selector)throw new Error("Slider selector not found.");this.resolveSlidesNumber(),this.selectorWidth=this.selector.offsetWidth,this.innerElements=[].slice.call(this.selector.children),this.currentSlide=this.config.loop?this.config.startIndex%this.innerElements.length:Math.max(0,Math.min(this.config.startIndex,this.innerElements.length-this.perPage)),this.transformProperty=t.webkitOrNot(),this.intervalId=null,this.observer=null,this.navDots=[];["resizeHandler","touchstartHandler","touchendHandler","touchmoveHandler","mousedownHandler","mouseupHandler","mouseleaveHandler","mousemoveHandler","clickHandler","autoplay","stopAutoplay","startAutoplay","checkViewport","prevSlide","nextSlide","handleDotClick"].forEach((t=>{this[t]=this[t].bind(this)})),this.init()}t.prototype={attachEvents:function(){window.addEventListener("resize",this.resizeHandler),this.config.draggable&&(this.pointerDown=!1,this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:!1},this.selector.addEventListener("touchstart",this.touchstartHandler),this.selector.addEventListener("touchend",this.touchendHandler),this.selector.addEventListener("touchmove",this.touchmoveHandler),this.selector.addEventListener("mousedown",this.mousedownHandler),this.selector.addEventListener("mouseup",this.mouseupHandler),this.selector.addEventListener("mouseleave",this.mouseleaveHandler),this.selector.addEventListener("mousemove",this.mousemoveHandler),this.selector.addEventListener("click",this.clickHandler))},detachEvents:function(){window.removeEventListener("resize",this.resizeHandler),this.selector.removeEventListener("touchstart",this.touchstartHandler),this.selector.removeEventListener("touchend",this.touchendHandler),this.selector.removeEventListener("touchmove",this.touchmoveHandler),this.selector.removeEventListener("mousedown",this.mousedownHandler),this.selector.removeEventListener("mouseup",this.mouseupHandler),this.selector.removeEventListener("mouseleave",this.mouseleaveHandler),this.selector.removeEventListener("mousemove",this.mousemoveHandler),this.selector.removeEventListener("click",this.clickHandler)},init:function(){this.attachEvents(),this.selector.style.overflow="hidden",this.selector.style.direction=this.config.rtl?"rtl":"ltr",this.buildSliderFrame(),this.config.onInit.call(this),this.config.autoplay&&!this.config.viewportPlay&&this.startAutoplay(),this.config.viewportPlay&&this.checkViewport()},buildSliderFrame:function(){const t=this.selectorWidth/this.perPage,e=this.config.loop?this.innerElements.length+2*this.perPage:this.innerElements.length;this.sliderFrame=document.createElement("div"),this.sliderFrame.style.width=t*e+"px",this.enableTransition(),this.config.draggable&&(this.selector.style.cursor="-webkit-grab");const i=document.createDocumentFragment();if(this.config.loop)for(let t=this.innerElements.length-this.perPage;t<this.innerElements.length;t++){const e=this.innerElements[t].cloneNode(!0),n=this.buildSliderFrameItem(e);i.appendChild(n)}for(let t=0;t<this.innerElements.length;t++){const e=this.buildSliderFrameItem(this.innerElements[t]);i.appendChild(e)}if(this.config.loop)for(let t=0;t<this.perPage;t++){const e=this.innerElements[t].cloneNode(!0),n=this.buildSliderFrameItem(e);i.appendChild(n)}this.sliderFrame.appendChild(i),this.selector.innerHTML="",this.selector.appendChild(this.sliderFrame),(this.config.controls||this.config.nav)&&this.buildSliderControls(),this.slideToCurrent()},buildSliderFrameItem:function(t){const e=document.createElement("div");return e.style.cssFloat=this.config.rtl?"right":"left",e.style.float=this.config.rtl?"right":"left",e.style.width=(this.config.loop?100/(this.innerElements.length+2*this.perPage):100/this.innerElements.length)+"%",e.appendChild(t),e},buildSliderControls:function(){const e=document.createElement("div");if(e.className="slider-controls",this.config.controls){const t=document.createElement("button");t.className="slider-prev",t.textContent="<",t.addEventListener("click",this.prevSlide);const i=document.createElement("button");i.className="slider-next",i.textContent=">",i.addEventListener("click",this.nextSlide),e.appendChild(t),e.appendChild(i)}if(this.config.nav){const t=document.createElement("div");t.className="slider-nav";for(let e=0;e<this.innerElements.length;e++){const i=document.createElement("button");i.className="slider-nav-item",i.dataset.index=e,i.addEventListener("click",this.handleDotClick),t.appendChild(i),this.navDots.push(i)}e.appendChild(t)}this.selector.parentNode.insertBefore(e,this.selector.nextSibling),t.injectSliderCSS(),this.updateNavDots()},resolveSlidesNumber:function(){if("number"==typeof this.config.perPage)this.perPage=this.config.perPage;else if("object"==typeof this.config.perPage){this.perPage=1;for(const t in this.config.perPage)window.innerWidth>=t&&(this.perPage=this.config.perPage[t])}},prev:function(t=1,e){if(this.innerElements.length<=this.perPage)return;let i=this.currentSlide;if(this.config.loop)if(this.currentSlide-t<0){this.disableTransition();const e=this.currentSlide+this.innerElements.length,i=e+this.perPage,n=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(n+s)+"px, 0, 0)",this.currentSlide=e-t}else this.currentSlide=this.currentSlide-t;else this.currentSlide=Math.max(this.currentSlide-t,0);i!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),e&&e.call(this))},next:function(t=1,e){if(this.innerElements.length<=this.perPage)return;let i=this.currentSlide;if(this.config.loop)if(this.currentSlide+t>this.innerElements.length-this.perPage){this.disableTransition();const e=this.currentSlide-this.innerElements.length,i=e+this.perPage,n=(this.config.rtl?1:-1)*i*(this.selectorWidth/this.perPage),s=this.config.draggable?this.drag.endX-this.drag.startX:0;this.sliderFrame.style[this.transformProperty]="translate3d("+(n+s)+"px, 0, 0)",this.currentSlide=e+t}else this.currentSlide=this.currentSlide+t;else this.currentSlide=Math.min(this.currentSlide+t,this.innerElements.length-this.perPage);i!==this.currentSlide&&(this.slideToCurrent(this.config.loop),this.config.onChange.call(this),e&&e.call(this))},disableTransition:function(){this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing},enableTransition:function(){this.sliderFrame.style.webkitTransition="all "+this.config.duration+"ms "+this.config.easing,this.sliderFrame.style.transition="all "+this.config.duration+"ms "+this.config.easing},goTo:function(t,e){if(this.innerElements.length<=this.perPage)return;let i=this.currentSlide;this.currentSlide=this.config.loop?t%this.innerElements.length:Math.min(Math.max(t,0),this.innerElements.length-this.perPage),i!==this.currentSlide&&(this.slideToCurrent(),this.config.onChange.call(this),e&&e.call(this))},slideToCurrent:function(t){const e=this.config.loop?this.currentSlide+this.perPage:this.currentSlide,i=(this.config.rtl?1:-1)*e*(this.selectorWidth/this.perPage);t?requestAnimationFrame((()=>{requestAnimationFrame((()=>{this.enableTransition(),this.sliderFrame.style[this.transformProperty]="translate3d("+i+"px, 0, 0)",this.updateNavDots()}))})):(this.sliderFrame.style[this.transformProperty]="translate3d("+i+"px, 0, 0)",this.updateNavDots())},updateNavDots:function(){this.config.nav&&this.navDots.length>0&&(this.navDots.forEach((t=>t.classList.remove("active"))),this.navDots[this.currentSlide%this.innerElements.length].classList.add("active"))},updateAfterDrag:function(){const t=(this.config.rtl?-1:1)*(this.drag.endX-this.drag.startX),e=Math.abs(t),i=this.config.multipleDrag?Math.ceil(e/(this.selectorWidth/this.perPage)):1,n=t>0&&this.currentSlide-i<0,s=t<0&&this.currentSlide+i>this.innerElements.length-this.perPage;t>0&&e>this.config.threshold&&this.innerElements.length>this.perPage?this.prev(i):t<0&&e>this.config.threshold&&this.innerElements.length>this.perPage&&this.next(i),this.slideToCurrent(n||s)},resizeHandler:function(){this.resolveSlidesNumber(),this.currentSlide+this.perPage>this.innerElements.length&&(this.currentSlide=this.innerElements.length<=this.perPage?0:this.innerElements.length-this.perPage),this.selectorWidth=this.selector.offsetWidth,this.buildSliderFrame()},clearDrag:function(){this.drag={startX:0,endX:0,startY:0,letItGo:null,preventClick:this.drag.preventClick}},touchstartHandler:function(t){-1===["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(t.target.nodeName)&&(t.stopPropagation(),this.pointerDown=!0,this.drag.startX=t.touches[0].pageX,this.drag.startY=t.touches[0].pageY,this.config.viewportPlay||this.stopAutoplay())},touchendHandler:function(t){t.stopPropagation(),this.pointerDown=!1,this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag(),this.config.viewportPlay||this.startAutoplay()},touchmoveHandler:function(t){if(t.stopPropagation(),null===this.drag.letItGo&&(this.drag.letItGo=Math.abs(this.drag.startY-t.touches[0].pageY)<Math.abs(this.drag.startX-t.touches[0].pageX)),this.pointerDown&&this.drag.letItGo){t.preventDefault(),this.drag.endX=t.touches[0].pageX,this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;const e=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),i=this.drag.endX-this.drag.startX,n=this.config.rtl?e+i:e-i;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*n+"px, 0, 0)"}},mousedownHandler:function(t){-1===["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(t.target.nodeName)&&(t.preventDefault(),t.stopPropagation(),this.pointerDown=!0,this.drag.startX=t.pageX,this.config.viewportPlay||this.stopAutoplay())},mouseupHandler:function(t){t.stopPropagation(),this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.enableTransition(),this.drag.endX&&this.updateAfterDrag(),this.clearDrag(),this.config.viewportPlay||this.startAutoplay()},mousemoveHandler:function(t){if(t.preventDefault(),this.pointerDown){"A"===t.target.nodeName&&(this.drag.preventClick=!0),this.drag.endX=t.pageX,this.selector.style.cursor="-webkit-grabbing",this.sliderFrame.style.webkitTransition="all 0ms "+this.config.easing,this.sliderFrame.style.transition="all 0ms "+this.config.easing;const e=(this.config.loop?this.currentSlide+this.perPage:this.currentSlide)*(this.selectorWidth/this.perPage),i=this.drag.endX-this.drag.startX,n=this.config.rtl?e+i:e-i;this.sliderFrame.style[this.transformProperty]="translate3d("+(this.config.rtl?1:-1)*n+"px, 0, 0)"}},mouseleaveHandler:function(t){this.pointerDown&&(this.pointerDown=!1,this.selector.style.cursor="-webkit-grab",this.drag.endX=t.pageX,this.drag.preventClick=!1,this.enableTransition(),this.updateAfterDrag(),this.clearDrag(),this.config.viewportPlay||this.startAutoplay())},clickHandler:function(t){this.drag.preventClick&&t.preventDefault(),this.drag.preventClick=!1},remove:function(t,e){if(t<0||t>=this.innerElements.length)throw new Error("Slider item to remove does not exist.");const i=t<this.currentSlide,n=this.currentSlide+this.perPage-1===t;(i||n)&&this.currentSlide--,this.innerElements.splice(t,1),this.buildSliderFrame(),e&&e.call(this)},insert:function(t,e,i){if(e<0||e>this.innerElements.length+1)throw new Error("Cannot insert slider item at this index.");if(-1!==this.innerElements.indexOf(t))throw new Error("Cannot insert duplicate item into slider.");e<=this.currentSlide>0&&this.innerElements.length&&this.currentSlide++,this.innerElements.splice(e,0,t),this.buildSliderFrame(),i&&i.call(this)},prepend:function(t,e){this.insert(t,0),e&&e.call(this)},append:function(t,e){this.insert(t,this.innerElements.length+1),e&&e.call(this)},destroy:function(t=!1,e){if(this.detachEvents(),this.selector.style.cursor="auto",this.stopAutoplay(),this.observer&&(this.observer.disconnect(),this.observer=null),this.config.controls){const t=this.selector.nextElementSibling;t&&t.classList.contains("slider-controls")&&t.remove()}if(t){const t=document.createDocumentFragment();for(let e=0;e<this.innerElements.length;e++)t.appendChild(this.innerElements[e]);this.selector.innerHTML="",this.selector.appendChild(t),this.selector.removeAttribute("style")}e&&e.call(this)},autoplay:function(){this.config.autoplay&&(this.intervalId=setInterval((()=>{this.next()}),this.config.interval))},startAutoplay:function(){!this.config.autoplay&&!this.config.viewportPlay||this.intervalId||this.autoplay()},stopAutoplay:function(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},checkViewport:function(){"IntersectionObserver"in window?(this.observer=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting?this.startAutoplay():this.stopAutoplay()}))}),{threshold:[0,.25,.5,.75,1]}),this.observer.observe(this.selector)):console.warn("IntersectionObserver is not supported, viewportPlay will not function.")},prevSlide:function(){this.prev()},nextSlide:function(){this.next()},handleDotClick:function(t){const e=parseInt(t.target.dataset.index,10);this.goTo(e)}},t.mergeSettings=function(t){const e={selector:".slider",duration:200,easing:"ease-out",perPage:1,startIndex:0,draggable:!0,multipleDrag:!0,threshold:20,loop:!1,rtl:!1,autoplay:!1,interval:3e3,viewportPlay:!1,controls:!1,nav:!1,onInit:function(){},onChange:function(){}},i=t||{};for(const t in i)e[t]=i[t];return e},t.webkitOrNot=function(){return void 0!==document.documentElement.style.transform?"transform":"WebkitTransform"},t.injectSliderCSS=function(){if(document.querySelector("#slider-style"))return;const t=document.createElement("style");t.id="slider-style",t.textContent="\n            .slider-controls {\n                display: flex;\n                justify-content: center;\n                margin-top: 10px;\n            }\n\n            .slider-prev, .slider-next {\n                background: none;\n                border: 1px solid #ccc;\n                font-size: 1em;\n                cursor: pointer;\n                padding: 5px 10px;\n                margin: 0 5px;\n                opacity: 0.7;\n                transition: opacity 0.3s ease;\n                border-radius: 5px;\n            }\n\n            .slider-prev:hover, .slider-next:hover {\n                opacity: 1;\n            }\n\n            .slider-nav {\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n\n            .slider-nav-item {\n                background-color: #bbb;\n                border: none;\n                width: 10px;\n                height: 10px;\n                border-radius: 50%;\n                margin: 0 3px;\n                cursor: pointer;\n                opacity: 0.7;\n                transition: opacity 0.3s ease, background-color 0.3s ease;\n            }\n\n            .slider-nav-item:hover, .slider-nav-item.active {\n                opacity: 1;\n            }\n\n            .slider-nav-item.active {\n                background-color: #333;\n            }\n        ",document.head.appendChild(t)},document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll(".slider").forEach((function(e){const i={};e.hasAttribute("duration")&&(i.duration=parseInt(e.getAttribute("duration"),10)),e.hasAttribute("draggable")&&(i.draggable="true"===e.getAttribute("draggable")),e.hasAttribute("loop")&&(i.loop="true"===e.getAttribute("loop")),e.hasAttribute("autoplay")&&(i.autoplay="true"===e.getAttribute("autoplay")),e.hasAttribute("interval")&&(i.interval=parseInt(e.getAttribute("interval"),10)),e.hasAttribute("viewport")&&(i.viewportPlay="true"===e.getAttribute("viewport")),e.hasAttribute("controls")&&(i.controls="true"===e.getAttribute("controls")),e.hasAttribute("nav")&&(i.nav="true"===e.getAttribute("nav")),new t({selector:e,...i})}))})),"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define("Slider",[],(function(){return t})):window.Slider=t}();
